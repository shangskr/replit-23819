import{u as F,c as i,aI as a,bk as c,e as t,bs as m,cf as w,al as g,B as u,bq as l,n as h,I as N,X as P,U as X}from"./index.dd67654f.js";import{o as j}from"./index.751cbe9e.js";import{d as z}from"./useUtil.9e6ef084.js";import{G as A}from"./index.e8c1cb2e.js";import{I as d}from"./SettingItem.e9c44853.js";import"./api.6ca6fbba.js";import"./index.ae28e06f.js";import"./item_type.be442da4.js";const re=()=>{const r=F();j("manage.sidemenu.other");const[p,_]=i(""),[k,y]=i(""),[f,b]=i(""),[$,v]=i(""),[q,S]=i(""),[o,G]=i([]),[Q,B]=a(()=>c.get(`/admin/setting/list?groups=${A.ARIA2},${A.SINGLE}`)),[H,M]=a(()=>c.post("/admin/setting/set_aria2",{uri:p(),secret:k()})),[O,R]=a(()=>c.post("/admin/setting/set_qbit",{url:f(),seedtime:$()}));(async()=>{const e=await B();l(e,n=>{var C,I,T,L,U;_(((C=n.find(s=>s.key==="aria2_uri"))==null?void 0:C.value)||""),y(((I=n.find(s=>s.key==="aria2_secret"))==null?void 0:I.value)||""),S(((T=n.find(s=>s.key==="token"))==null?void 0:T.value)||""),b(((L=n.find(s=>s.key==="qbittorrent_url"))==null?void 0:L.value)||""),v(((U=n.find(s=>s.key==="qbittorrent_seedtime"))==null?void 0:U.value)||""),G(n)})})();const[x,D]=a(()=>c.post("/admin/setting/reset_token")),{copy:E}=z();return t(X,{get loading(){return Q()},get children(){return[t(m,{mb:"$2",get children(){return r("settings_other.aria2")}}),t(w,{gap:"$2",columns:{"@initial":1,"@md":2},get children(){return[t(d,g(()=>o().find(e=>e.key==="aria2_uri"),{get value(){return p()},onChange:e=>_(e)})),t(d,g(()=>o().find(e=>e.key==="aria2_secret"),{get value(){return k()},onChange:e=>y(e)}))]}}),t(u,{my:"$2",get loading(){return H()},onClick:async()=>{const e=await M();l(e,n=>{h.success(`${r("settings_other.aria2_version")} ${n}`)})},get children(){return r("settings_other.set_aria2")}}),t(m,{my:"$2",get children(){return r("settings_other.qbittorrent")}}),t(w,{gap:"$2",columns:{"@initial":1,"@md":2},get children(){return[t(d,g(()=>o().find(e=>e.key==="qbittorrent_url"),{get value(){return f()},onChange:e=>b(e)})),t(d,g(()=>o().find(e=>e.key==="qbittorrent_seedtime"),{get value(){return $()},onChange:e=>v(e)}))]}}),t(u,{my:"$2",get loading(){return O()},onClick:async()=>{const e=await R();l(e,n=>{h.success(n)})},get children(){return r("settings_other.set_qbit")}}),t(m,{my:"$2",get children(){return r("settings.token")}}),t(N,{get value(){return q()},readOnly:!0}),t(P,{my:"$2",spacing:"$2",get children(){return[t(u,{onClick:()=>{E(q())},get children(){return r("settings_other.copy_token")}}),t(u,{colorScheme:"danger",get loading(){return x()},onClick:async()=>{const e=await D();l(e,n=>{h.success(r("settings_other.reset_token_success")),S(n)})},get children(){return r("settings_other.reset_token")}})]}})]}})};export{re as default};
